---
layout:     post
title:      "2023_BUAA_OOPre"
subtitle:   "2023 春季北航计算机学院计面向对象先导课程总结"
date:       2023-11-08 22:00:00
author:     "hyy"
header-img: "img/post-bg-2015.jpg"
catalog: true
tags:
    - OO
---

[TODO]

## 前言

2023 北航面向对象先导一共 8 次课程，从 **Java 程序入门与代码管理**、**类的初识与单元测试**、**对象管理与容器**到**输入解析**、**BUG 分析与调试**、**继承与接口**、**设计模式**至最后的**代码风格与重构**，作业分为 **2 次 bug 修复**、**5 次迭代**和最后的**总结**。OOpre 课程带领我们入门 Java 语言，培养习惯、打下基础。

---


## 一、架构设计

1. `Main`：从标准输入读入指令，按空格进行分割
2. `Carryout`：进行输入解析，对指令进行分情况处理
3. `Datelog`：对战斗日志按日期储存
4. `Befight/Bebeat`：对战斗日志按攻击/受击储存

> 其余无特殊处理

![code-architecture](\img\oo\oopre\code-architecture.png)

1. 顶层声明 `adventurers` 和 `datelogs` 两个 `Hashmap`，进行统一管理
2. `Adventurer` 类拥有 `hireAdventurers` 属性对雇佣的冒险者进行管理，`log` 属性存放战斗日志。此外对**拥有**与**携带**分为两个 `Hashmap` 进行管理（逻辑简单但进行卖出与删除等处理时需要同时修改，容易出错）
3. `Bottle` 和 `Equipment` 内使用了继承，使逻辑更为清晰，可以统一处理
4. 对价值体的处理采用了接口，对价值相关业务的处理更加直观

### 细节处理
#### 1. 遍历容器：迭代器删除
遍历容器的本质是用迭代器遍历，一个很经典的错误是边遍历边删除，需要使用迭代器遍历，删除的时候使用迭代器的删除方法
本人初次遇到该问题时使用了 `break` 来终止循环并 `remove`，也能正常运行。但在后续迭代过程中该处就出现了问题

#### 2. 正则表达式
- 注意非贪婪匹配（使用不当可能会“吞”掉后续想要匹配的字符）
- 注意捕获组的使用（更加方便去对匹配到的数据进行相应处理）
- 注意 `^` 的不同用法
- 注意字符转义

#### 3. 层次化
注意继承、接口和其对应模式的使用对程序进行解耦，提高层次化

#### 4. 注意声明局部变量时的位置
局部变量若在循环开始时声明，则一旦在循环过程中该变量被改变，就会对后续循环产生影响。在代码具有一定的复杂度时该 bug 难以发现

## 二、JUnit的心得体会
### 1. `assert()` 使用

| 方法                                            | 介绍                                 |
| ---------------------------------------------- | ----------------------------------- |
| `assertEquals(expected, actual)`                | 检查两个值是否相等                   |
| `assertTrue(condition)`                         | 检查条件是否为真                     |
| `assertFalse(condition)`                        | 检查条件是否为假                     |
| `assertNotNull(object)`                         | 检查是否不为空                       |
| `assertNull(object)`                            | 检查是否为空                         |
| `assertNotSame(expected, actual)`               | 检查两个相关对象是否不指向同一个对象 |
| `assertSame(expected, actual)`                  | 检查两个相关对象是否指向同一个对象   |
| `assertArrayEquals(expectedArray, resultArray)` | 检查两个数组是否相等                 |


### 2. 覆盖率
- 分支覆盖率
- 类覆盖率
- 方法覆盖率
- 行覆盖率
- 分支覆盖率

### 3. 体会
`JUnit` 可以省去自己肉眼比对输出结果和预期结果这一过程，且测试数据更加方便，对自己所测数据覆盖了哪些方法和分支也一目了然，非常方便。

---

## 三、学习 OOPre 的心得体会
OOPre 课程让我对 Java 语法有了初步的认识，从大一 C 语言面向程序到面向对象有了适应性的转变，并对代码风格、代码重构、代码层次化等有了更加深刻的理解。其中，我对程序解耦和构建层次化的重要性认知尤为深刻。如果耦合度较大，在代码迭代和 bug 修复时会非常复杂且痛苦，整体逻辑性也很差。同时期待 OO 正课~

## 四、对OOPre课程的建议
希望 OOPre 课程能加强中测点的强度~